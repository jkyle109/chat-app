(this.webpackJsonpdrabble=this.webpackJsonpdrabble||[]).push([[0],{36:function(e,t,a){e.exports=a(73)},5:function(e,t){e.exports={GLOBAL_CHAT:"GLOBAL_MESSAGE",USER_CONNECTED:"USER_CONNECTED",MESSAGE_RECIEVED:"MESSAGE_RECIEVED",MESSAGE_SENT:"MESSAGE_SENT",USER_DISCONNECTED:"USER_DISCONNECTED",USER_CHANGE:"USER_CHANGE",VERIFY_USER:"VERIFY_USER",LINEDRAWN:"LINEDRAWN",SCREENCLEAR:"SCREENCLEAR",LOG:"LOG",GAME_START:"GAME_START",ROUND_START:"ROUND_START",WORD_CHANGE:"WORD_CHANGE",WORD_CHOSEN:"WORD_CHOSEN",ROUND_END:"ROUND_END",GAME_END:"GAME_END"}},69:function(e,t){},72:function(e,t){e.exports=[{name:"white",hex:"#FFFFFF"},{name:"gray",hex:"#808080"},{name:"black",hex:"#000000"},{name:"red",hex:"#FF0000"},{name:"brown",hex:"#964B00"},{name:"yellow",hex:"#FFFF00"},{name:"green",hex:"#008000"},{name:"aqua",hex:"#00FFFF"},{name:"teal",hex:"#008080"},{name:"blue",hex:"#0000FF"},{name:"navy",hex:"#000080"},{name:"purple",hex:"#800080"}]},73:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(33),r=a.n(s),i=a(1),c=a(2),l=a(4),u=a(3),h=a(34),m=a.n(h),d=a(5),p=a(35),v=a(6),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={username:"",roomCode:"",error:""},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.setUser=n.setUser.bind(Object(v.a)(n)),n}return Object(c.a)(a,[{key:"setUser",value:function(e){var t=e.user,a=e.isUser,n=e.roomCode;a?this.setError("Username is taken."):this.props.setUser(t,n)}},{key:"setError",value:function(e){this.setState({error:e}),console.log(e)}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(p.a)({},t,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.socket.emit(d.VERIFY_USER,this.state.username,this.state.roomCode,this.setUser),console.log(d.VERIFY_USER,this.state.username)}},{key:"render",value:function(){return o.a.createElement("div",{className:"loginForm"},o.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off"},o.a.createElement("span",null,o.a.createElement("label",{className:"loginText"},"Username: "),o.a.createElement("input",{type:"text",name:"username",value:this.state.username,placeholder:"Username",onChange:this.handleChange,className:"loginField"})),o.a.createElement("span",null,o.a.createElement("label",{className:"loginText"},"Room Code: "),o.a.createElement("input",{type:"text",name:"roomCode",value:this.state.roomCode,placeholder:"Room",onChange:this.handleChange,className:"loginField"})),o.a.createElement("input",{type:"submit",value:"Join!",className:"loginSubmit"})))}}]),a}(n.Component),f=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={message:""},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState({message:t})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.message;""!==t&&(this.props.sendMessage(t),this.setState({message:""})),this.input.focus()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{className:"messageInput",type:"text",value:this.state.message,placeholder:"Type here to chat!",onChange:this.handleChange,ref:function(t){return e.input=t}}),o.a.createElement("input",{type:"submit",value:"Send",className:"messageSend"})))}}]),a}(n.Component),C=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.message.includes("@"+this.props.user.name);return o.a.createElement("div",{className:"messageBox",style:{backgroundColor:e?"rgb(46, 1, 46)":"none"}},o.a.createElement("span",{className:"color"},this.props.sender.name),o.a.createElement("span",{className:"noColor"},": "+this.props.message))}}]),a}(n.Component),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"serverMessage"},this.props.message)}}]),a}(n.Component),g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).toggle=function(e){e.classList.toggle("down")},n.state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.roomList).length,a=Object.keys(this.props.roomList).map((function(e){return o.a.createElement("div",{key:e},e)}));return o.a.createElement("div",{className:"chatNav"},o.a.createElement("span",{className:"chatNavLeft"},o.a.createElement("span",{className:"color"},"Room Code: "),o.a.createElement("span",{className:"noColor"},this.props.roomCode)),o.a.createElement("span",{className:"chatNavRight"},o.a.createElement("span",{className:"color"},"Users: "),o.a.createElement("span",{className:"noColor"},t),o.a.createElement("div",{onClick:function(){e.toggle(e.viewerChev),e.toggle(e.viewerList)},className:"chevronBorder"},o.a.createElement("div",null,o.a.createElement("i",{className:"fas fa-chevron-left rotate",ref:function(t){e.viewerChev=t}})),o.a.createElement("div",{className:"userList",ref:function(t){return e.viewerList=t}},o.a.createElement("div",{className:"noColor"},"Current Room Users:"),a))))}}]),a}(n.Component),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={chatMessages:[]},n.sendMessage=n.sendMessage.bind(Object(v.a)(n)),n.addMessage=n.addMessage.bind(Object(v.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.addMessage()}},{key:"componentDidUpdate",value:function(){this.autoScr()}},{key:"sendMessage",value:function(e){var t=this.props.socket,a=this.props.user,n=this.props.roomCode;t.emit(d.MESSAGE_SENT,e,a,n)}},{key:"addMessage",value:function(){var e=this;this.props.socket.on(d.MESSAGE_RECIEVED,(function(t){var a=e.state.chatMessages;a.push(t),e.setState({chatMessages:a})}))}},{key:"autoScr",value:function(){this.messageBox.scrollTop=this.messageBox.scrollHeight}},{key:"render",value:function(){var e=this,t=this.state.chatMessages.map((function(t){return"server"===t.sender.name?o.a.createElement(b,{key:t.id,message:t.message}):o.a.createElement(C,{key:t.id,message:t.message,sender:t.sender,user:e.props.user})}));return o.a.createElement("div",null,o.a.createElement(g,{roomCode:this.props.roomCode,roomList:this.props.roomList}),o.a.createElement(f,{chat:this.state,sendMessage:this.sendMessage}),o.a.createElement("div",{className:"messageBlock",ref:function(t){return e.messageBox=t}},t))}}]),a}(n.Component),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"navBar"},"Drabble")}}]),a}(n.Component),S=a(72),k=[2,4,6,10,16],j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=S.map((function(t){return o.a.createElement("div",{key:t.hex,className:"colorBox",style:{backgroundColor:t.hex},onClick:function(){return e.props.setPenColor(t.hex)}})})),a=k.map((function(t){return o.a.createElement("span",{className:"outerDot",onClick:function(){return e.props.setLineWidth(t)},style:{borderColor:t===e.props.lineWidth?"purple":""},key:t},o.a.createElement("span",{className:"innerDot",style:{width:t,height:t}}))}));return o.a.createElement("div",{className:"toolBar"},o.a.createElement("input",{className:"currentColor",type:"color",value:this.props.penColor,onChange:function(t){e.props.setPenColor(t.target.value)}}),o.a.createElement("div",{className:"colorGrid"},t),a,o.a.createElement("div",{className:"colorClear",onClick:this.props.clearCanvas},"Clear"))}}]),a}(n.Component),y=a(5),R=y.LINEDRAWN,D=y.SCREENCLEAR,M=y.GAME_START,W=y.GAME_END,T=y.ROUND_START,w=y.ROUND_END,_=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).resizeCanvas=function(){var e=n.d.offsetWidth,t=n.d.offsetHeight;n.canvas.width=e,n.canvas.height=t,n.canvas.style.width=e+"px",n.canvas.style.height=t+"px"},n.drawLine=function(e){var t=n.ctx,a=n.canvas.width,o=n.canvas.height,s=e.x1*a,r=e.y1*o,i=e.x2*a,c=e.y2*o;t.beginPath(),t.moveTo(s,r),t.lineTo(i,c),t.lineCap="round",t.strokeStyle=e.penColor,t.lineWidth=e.lineWidth,t.stroke(),t.closePath()},n.handleDraw=function(){var e=n.props.socket,t=n.props.roomCode,a=n.canvas.width,o=n.canvas.height,s={x1:n.startX/a,y1:n.startY/o,x2:n.currentX/a,y2:n.currentY/o,penColor:n.state.penColor,lineWidth:n.state.lineWidth};n.startX=n.currentX,n.startY=n.currentY,e.emit(R,s,t)},n.trackMouse=function(e){n.state.main&&("touchmove"===e.type?(n.currentX=e.touches[0].pageX-e.touches[0].target.offsetLeft,n.currentY=e.touches[0].pageY-e.touches[0].target.offsetTop):(n.currentX=e.nativeEvent.offsetX,n.currentY=e.nativeEvent.offsetY))},n.startTrackMouse=function(e){n.state.main&&(0!==e.button&&"touchstart"!==e.type||(n.startX=n.currentX,n.startY=n.currentY,n.drawing=setInterval(n.handleDraw,20)))},n.stopTrackMouse=function(){clearInterval(n.drawing)},n.setPenColor=function(e){n.setState({penColor:e})},n.setLineWidth=function(e){n.setState({lineWidth:e})},n.clearCanvas=function(){if(n.state.main){var e=n.props.socket,t=n.props.roomCode;e.emit(D,n.props.user,t)}},n.state={penColor:"#000000",lineWidth:2,main:!0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.ctx=this.canvas.getContext("2d");var t=this.d.offsetWidth,a=this.d.offsetHeight;this.canvas.width=t,this.canvas.height=a,this.canvas.style.width=t+"px",this.canvas.style.height=a+"px";var n=this.props.socket;n.on(R,this.drawLine),n.on(D,(function(){e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height)})),window.addEventListener("resize",this.resizeCanvas,!1),n.on(M,(function(){e.setState({main:!1},e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height))})),n.on(T,(function(t,a){e.props.user.name===a.name&&e.setState({main:!0})})),n.on(w,(function(){e.setState({main:!1})})),n.on(W,(function(){e.setState({main:!0})}))}},{key:"render",value:function(){var e=this,t=this.state.penColor,a=this.state.lineWidth,n=this.state.main;return o.a.createElement("div",null,o.a.createElement("div",{className:"whiteBoard",ref:function(t){return e.d=t}},o.a.createElement("canvas",{ref:function(t){return e.canvas=t},onMouseDown:this.startTrackMouse,onMouseLeave:this.stopTrackMouse,onMouseUp:this.stopTrackMouse,onMouseMove:this.trackMouse,onContextMenu:function(e){e.preventDefault()},onTouchStart:this.startTrackMouse,onTouchCancel:this.stopTrackMouse,onTouchEnd:this.stopTrackMouse,onTouchMove:this.trackMouse}," ")),o.a.createElement(j,{penColor:t,setPenColor:this.setPenColor,lineWidth:a,setLineWidth:this.setLineWidth,clearCanvas:this.clearCanvas,main:n}))}}]),a}(n.Component),x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null)}}]),a}(n.Component),A=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("pre",{className:"Word"},this.props.main?this.props.word:this.props.visableWord)}}]),a}(n.Component),U=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.wordOptions.map((function(t){return o.a.createElement("input",{className:"wordOption",key:t,onClick:e.props.handleWordChoice,type:"button",value:t})}));return o.a.createElement("div",{className:"selectWord"},t)}}]),a}(n.Component),L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).formatWord=function(e){for(var t="",a=0;a<e.length;a++)t=t+e[a]+" ";return t},n.handleWordChoice=function(e){var t=n.props.socket,a=n.props.roomCode,o=e.target.value;n.setState({choosingWord:!1}),t.emit(d.WORD_CHOSEN,o,a),clearTimeout(n.selectWord),n.word=n.formatWord(o)},n.state={visableWord:" ",choosingWord:!1,wordOptions:[],delay:null,main:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.socket,a=this.props.roomCode;t.on(d.ROUND_START,(function(t,n){e.props.user.name===n.name&&(e.setState({wordOptions:t,choosingWord:!0,main:!0}),e.selectWord=setTimeout((function(){var n=e.props.socket;e.setState({choosingWord:!1}),n.emit(d.WORD_CHOSEN,t[1],a),e.word=e.formatWord(t[1])}),1e4))})),t.on(d.WORD_CHOSEN,(function(a,n,o,s){a=e.formatWord(a),e.setState({visableWord:a,delay:o}),e.state.main&&(e.small=setInterval((function(){t.emit(d.WORD_CHANGE,s)}),o),e.large=setTimeout((function(){clearInterval(e.small),t.emit(d.ROUND_END,s)}),n))})),t.on(d.WORD_CHANGE,(function(t){t=e.formatWord(t),e.setState({visableWord:t})})),t.on(d.ROUND_END,(function(){clearInterval(e.small),clearTimeout(e.large),e.word="",e.setState({visableWord:"",choosingWord:!1,wordOptions:[],delay:null,main:!1})})),t.on(d.GAME_END,(function(){}))}},{key:"render",value:function(){var e=this.state.visableWord,t=this.state.choosingWord,a=this.state.wordOptions,n=this.state.main;return o.a.createElement("div",null,t?o.a.createElement(U,{wordOptions:a,handleWordChoice:this.handleWordChoice}):"",o.a.createElement(A,{visableWord:e,main:n,word:this.word}),o.a.createElement(x,null))}}]),a}(n.Component),G=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).initSocket=function(){var e=m()("/");e.on("connect",(function(){console.log("Connected")})),n.setState({socket:e}),e.on(d.USER_CHANGE,(function(e){n.setState({roomList:e})})),e.on(d.GAME_START,(function(){n.setState({gameMode:!0})})),e.on(d.GAME_END,(function(){n.setState({gameMode:!1})})),e.on(d.LOG,(function(e){console.log(e)}))},n.disconnect=function(){var e=n.state.socket;null!==n.state.user&&e.emit(d.USER_DISCONNECTED,n.state.user,n.state.roomCode)},n.setUser=function(e,t){n.state.socket.emit(d.USER_CONNECTED,e,t),console.log(d.USER_CONNECTED),n.setState({user:e,roomCode:t})},n.state={socket:null,user:null,roomCode:null,roomList:[],gameMode:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.initSocket(),window.onbeforeunload=this.disconnect}},{key:"render",value:function(){var e=this.state.user,t=this.state.socket,a=this.state.roomCode,n=this.state.roomList,s=this.state.gameMode;return o.a.createElement("div",null,o.a.createElement(N,{roomCode:a}),e?o.a.createElement("div",null,s?o.a.createElement(L,{socket:t,user:e,roomCode:a}):"",o.a.createElement(_,{socket:t,user:e,roomCode:a}),o.a.createElement(O,{socket:t,user:e,roomCode:a,roomList:n})):o.a.createElement(E,{socket:t,setUser:this.setUser}))}}]),a}(n.Component),F=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement(G,{title:"Chat App Title"})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.d35f81f5.chunk.js.map