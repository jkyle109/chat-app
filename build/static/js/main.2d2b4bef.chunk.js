(this.webpackJsonpdrabble=this.webpackJsonpdrabble||[]).push([[0],{36:function(e,t,a){e.exports=a(73)},6:function(e,t){e.exports={GLOBAL_CHAT:"GLOBAL_CHAT",USER_CONNECTED:"USER_CONNECTED",MESSAGE_RECIEVED:"MESSAGE_RECIEVED",MESSAGE_SENT:"MESSAGE_SENT",USER_DISCONNECTED:"USER_DISCONNECTED",TYPING:"TYPING",VERIFY_USER:"VERIFY_USER",LOGOUT:"LOGOUT",LINEDRAWN:"LINEDRAWN",SCREENCLEAR:"SCREENCLEAR",LOG:"LOG"}},69:function(e,t){},72:function(e,t){e.exports=[{name:"white",hex:"#FFFFFF"},{name:"gray",hex:"#808080"},{name:"black",hex:"#000000"},{name:"red",hex:"#FF0000"},{name:"brown",hex:"#964B00"},{name:"yellow",hex:"#FFFF00"},{name:"green",hex:"#008000"},{name:"aqua",hex:"#00FFFF"},{name:"teal",hex:"#008080"},{name:"blue",hex:"#0000FF"},{name:"navy",hex:"#000080"},{name:"purple",hex:"#800080"}]},73:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(33),r=a.n(o),c=a(1),i=a(2),l=a(4),u=a(3),h=a(34),m=a.n(h),d=a(6),p=a(35),v=a(5),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={username:"",roomCode:"",error:""},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.setUser=n.setUser.bind(Object(v.a)(n)),n}return Object(i.a)(a,[{key:"setUser",value:function(e){var t=e.user,a=e.isUser,n=e.roomCode;a?this.setError("Username is taken."):this.props.setUser(t,n)}},{key:"setError",value:function(e){this.setState({error:e}),console.log(e)}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(p.a)({},t,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.socket.emit(d.VERIFY_USER,this.state.username,this.state.roomCode,this.setUser),console.log(d.VERIFY_USER,this.state.username)}},{key:"render",value:function(){return s.a.createElement("div",{className:"loginForm"},s.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off"},s.a.createElement("span",null,s.a.createElement("label",{className:"loginText"},"Username: "),s.a.createElement("input",{type:"text",name:"username",value:this.state.username,placeholder:"Username",onChange:this.handleChange,className:"loginField"})),s.a.createElement("span",null,s.a.createElement("label",{className:"loginText"},"Room Code: "),s.a.createElement("input",{type:"text",name:"roomCode",value:this.state.roomCode,placeholder:"Room",onChange:this.handleChange,className:"loginField"})),s.a.createElement("input",{type:"submit",value:"Join!",className:"loginSubmit"})))}}]),a}(n.Component),f=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={message:""},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState({message:t})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.message;""!==t&&(this.props.sendMessage(t),this.setState({message:""})),this.input.focus()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{className:"messageInput",type:"text",value:this.state.message,placeholder:"Type here to chat!",onChange:this.handleChange,ref:function(t){return e.input=t}}),s.a.createElement("input",{type:"submit",value:"Send",className:"messageSend"})))}}]),a}(n.Component),C=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.message.includes("@"+this.props.user.name);return s.a.createElement("div",{className:"messageBox",style:{backgroundColor:e?"rgb(46, 1, 46)":"none"}},s.a.createElement("span",{className:"color"},this.props.sender.name),s.a.createElement("span",{className:"noColor"},": "+this.props.message))}}]),a}(n.Component),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"serverMessage"},this.props.message)}}]),a}(n.Component),g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){var e=Object.keys(this.props.roomList).length;return s.a.createElement("div",{className:"chatNav"},s.a.createElement("span",{className:"chatNavLeft"},s.a.createElement("span",{className:"color"},"Room Code: "),s.a.createElement("span",{className:"noColor"},this.props.roomCode)),s.a.createElement("span",{className:"chatNavRight"},s.a.createElement("span",{className:"color"},"Users: "),s.a.createElement("span",{className:"noColor"},e)))}}]),a}(n.Component),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={chatMessages:[]},n.sendMessage=n.sendMessage.bind(Object(v.a)(n)),n.addMessage=n.addMessage.bind(Object(v.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.addMessage()}},{key:"componentDidUpdate",value:function(){this.autoScr()}},{key:"sendMessage",value:function(e){var t=this.props.socket,a=this.props.user,n=this.props.roomCode;t.emit(d.MESSAGE_SENT,e,a,n)}},{key:"addMessage",value:function(){var e=this;this.props.socket.on(d.MESSAGE_RECIEVED,(function(t){var a=e.state.chatMessages;a.push(t),e.setState({chatMessages:a})}))}},{key:"autoScr",value:function(){this.messageBox.scrollTop=this.messageBox.scrollHeight}},{key:"render",value:function(){var e=this,t=this.state.chatMessages.map((function(t){return"server"===t.sender.name?s.a.createElement(b,{key:t.id,message:t.message}):s.a.createElement(C,{key:t.id,message:t.message,sender:t.sender,user:e.props.user})}));return s.a.createElement("div",null,s.a.createElement(g,{roomCode:this.props.roomCode,roomList:this.props.roomList}),s.a.createElement(f,{chat:this.state,sendMessage:this.sendMessage}),s.a.createElement("div",{className:"messageBlock",ref:function(t){return e.messageBox=t}},t))}}]),a}(n.Component),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"navBar"},"Drabble")}}]),a}(n.Component),S=a(72),N=[2,4,6,10,16],y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=S.map((function(t){return s.a.createElement("div",{key:t.hex,className:"colorBox",style:{backgroundColor:t.hex},onClick:function(){return e.props.setPenColor(t.hex)}})})),a=N.map((function(t){return s.a.createElement("span",{className:"outerDot",onClick:function(){return e.props.setLineWidth(t)},key:t},s.a.createElement("span",{className:"innerDot",style:{width:t,height:t}}))}));return s.a.createElement("div",{className:"toolBar"},s.a.createElement("input",{className:"currentColor",type:"color",value:this.props.penColor,onInput:function(t){e.props.setPenColor(t.target.value)}}),s.a.createElement("div",{className:"colorGrid"},t),a,s.a.createElement("div",{className:"colorClear",onClick:this.props.clearCanvas},"Clear"))}}]),a}(n.Component),j=a(6),M=j.LINEDRAWN,x=j.SCREENCLEAR,T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).resizeCanvas=function(){var e=n.d.offsetWidth,t=n.d.offsetHeight;n.canvas.width=e,n.canvas.height=t,n.canvas.style.width=e+"px",n.canvas.style.height=t+"px"},n.drawLine=function(e){var t=n.ctx,a=n.canvas.width,s=n.canvas.height,o=e.x1*a,r=e.y1*s,c=e.x2*a,i=e.y2*s;t.beginPath(),t.moveTo(o,r),t.lineTo(c,i),t.lineCap="round",t.strokeStyle=e.penColor,t.lineWidth=e.lineWidth,t.stroke(),t.closePath()},n.handleDraw=function(){var e=n.props.socket,t=n.props.roomCode,a=n.canvas.width,s=n.canvas.height,o={x1:n.startX/a,y1:n.startY/s,x2:n.currentX/a,y2:n.currentY/s,penColor:n.state.penColor,lineWidth:n.state.lineWidth};n.startX=n.currentX,n.startY=n.currentY,e.emit(M,o,t)},n.trackMouse=function(e){"touchmove"===e.type?(n.currentX=e.touches[0].pageX-e.touches[0].target.offsetLeft,n.currentY=e.touches[0].pageY-e.touches[0].target.offsetTop):(n.currentX=e.nativeEvent.offsetX,n.currentY=e.nativeEvent.offsetY)},n.startTrackMouse=function(e){0!==e.button&&"touchstart"!==e.type||(n.startX=n.currentX,n.startY=n.currentY,n.drawing=setInterval(n.handleDraw,20))},n.stopTrackMouse=function(){clearInterval(n.drawing)},n.setPenColor=function(e){console.log(e),n.setState({penColor:e})},n.setLineWidth=function(e){n.setState({lineWidth:e})},n.clearCanvas=function(){var e=n.props.socket,t=n.props.roomCode;e.emit(x,n.props.user,t)},n.state={penColor:"#000000",lineWidth:2},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.ctx=this.canvas.getContext("2d");var t=this.d.offsetWidth,a=this.d.offsetHeight;this.canvas.width=t,this.canvas.height=a,this.canvas.style.width=t+"px",this.canvas.style.height=a+"px";var n=this.props.socket;n.on(M,this.drawLine),n.on(x,(function(){e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height)})),window.addEventListener("resize",this.resizeCanvas,!1)}},{key:"render",value:function(){var e=this,t=this.state.penColor;return s.a.createElement("div",null,s.a.createElement("div",{className:"whiteBoard",ref:function(t){return e.d=t}},s.a.createElement("canvas",{ref:function(t){return e.canvas=t},onMouseDown:this.startTrackMouse,onMouseLeave:this.stopTrackMouse,onMouseUp:this.stopTrackMouse,onMouseMove:this.trackMouse,onContextMenu:function(e){e.preventDefault()},onTouchStart:this.startTrackMouse,onTouchCancel:this.stopTrackMouse,onTouchEnd:this.stopTrackMouse,onTouchMove:this.trackMouse}," ")),s.a.createElement(y,{penColor:t,setPenColor:this.setPenColor,setLineWidth:this.setLineWidth,clearCanvas:this.clearCanvas}))}}]),a}(n.Component),R=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).initSocket=function(){var e=m()("/");e.on("connect",(function(){console.log("Connected")})),n.setState({socket:e}),e.on(d.USER_CONNECTED,(function(e){n.setState({roomList:e})}))},n.disconnect=function(){var e=n.state.socket;null!==n.state.user&&e.emit(d.USER_DISCONNECTED,n.state.user,n.state.roomCode)},n.setUser=function(e,t){""!==t&&null!==t||(t="Global-Chat"),n.state.socket.emit(d.USER_CONNECTED,e,t),console.log(d.USER_CONNECTED),n.setState({user:e,roomCode:t})},n.state={socket:null,user:null,roomCode:null,roomList:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.initSocket(),window.onbeforeunload=this.disconnect}},{key:"render",value:function(){var e=this.state.user,t=this.state.socket,a=this.state.roomCode,n=this.state.roomList;return s.a.createElement("div",null,s.a.createElement(O,{roomCode:a}),e?s.a.createElement("div",null,s.a.createElement(T,{socket:t,user:e,roomCode:a}),s.a.createElement(k,{socket:t,user:e,roomCode:a,roomList:n})):s.a.createElement(E,{socket:t,setUser:this.setUser}))}}]),a}(n.Component),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement(R,{title:"Chat App Title"})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.2d2b4bef.chunk.js.map